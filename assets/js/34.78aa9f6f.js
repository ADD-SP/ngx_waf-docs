(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{362:function(e,t,a){"use strict";a.r(t);var r=a(25),s=Object(r.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"change-log-6-0-x"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#change-log-6-0-x"}},[e._v("#")]),e._v(" Change Log (6.0.x)")]),e._v(" "),t("p",[e._v("The format is based on "),t("a",{attrs:{href:"https://keepachangelog.com/en/1.0.0/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Keep a Changelog"),t("OutboundLink")],1),e._v(",\nand this project adheres to "),t("a",{attrs:{href:"https://semver.org/spec/v2.0.0.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Semantic Versioning"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("What is a breaking change?")]),e._v(" "),t("ul",[t("li",[e._v("The original configuration file may not work, for example, if a directive item is removed or renamed.")]),e._v(" "),t("li",[e._v("It may be necessary to update the build environment, such as installing new dependencies.")])])]),e._v(" "),t("h2",{attrs:{id:"_6-0-3-2021-08-02-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-0-3-2021-08-02-utc-0800"}},[e._v("#")]),e._v(" [6.0.3] - 2021-08-02 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"fixed"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fixed"}},[e._v("#")]),e._v(" Fixed")]),e._v(" "),t("ul",[t("li",[e._v("A segmentation fault may be raised when releasing resources from the virtual machine.")])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_6-0-2-2021-08-01-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-0-2-2021-08-01-utc-0800"}},[e._v("#")]),e._v(" [6.0.2] - 2021-08-01 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"fixed-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fixed-2"}},[e._v("#")]),e._v(" Fixed")]),e._v(" "),t("ul",[t("li",[e._v("The whitelist of URL and Referer in the upper-level configuration cannot be inherited properly.")])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_6-0-1-2021-07-30-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-0-1-2021-07-30-utc-0800"}},[e._v("#")]),e._v(" [6.0.1] - 2021-07-30 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"deprecated"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#deprecated"}},[e._v("#")]),e._v(" Deprecated")]),e._v(" "),t("ul",[t("li",[e._v("Deprecates the parameters "),t("code",[e._v("interval")]),e._v(" and "),t("code",[e._v("percent")]),e._v(" of the directive "),t("code",[e._v("waf_cache")]),e._v(", but does not remove them, only that they no longer have any effect. These two parameters will be removed in the future.")])]),e._v(" "),t("h3",{attrs:{id:"changed"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#changed"}},[e._v("#")]),e._v(" Changed")]),e._v(" "),t("ul",[t("li",[e._v("Improved performance of CC protection.")])]),e._v(" "),t("h3",{attrs:{id:"fixed-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fixed-3"}},[e._v("#")]),e._v(" Fixed")]),e._v(" "),t("ul",[t("li",[e._v("Extreme cases may waste a lot of memory. Thanks to "),t("a",{attrs:{href:"https://github.com/RekGRpth",target:"_blank",rel:"noopener noreferrer"}},[e._v("@RekGRpth"),t("OutboundLink")],1),e._v(" for their help.")])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_6-0-0-2021-07-21-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-0-0-2021-07-21-utc-0800"}},[e._v("#")]),e._v(" [6.0.0] - 2021-07-21 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"note"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#note"}},[e._v("#")]),e._v(" NOTE")]),e._v(" "),t("ul",[t("li",[t("p",[t("strong",[e._v("This release contains some breaking changes.")])])]),e._v(" "),t("li",[t("p",[e._v("Advanced rules have a high performance cost because the principle is to compile the rules into a series of instructions that are then executed by the VM.")])])]),e._v(" "),t("h3",{attrs:{id:"upgrade-from-5-x-x-to-6-x-x"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#upgrade-from-5-x-x-to-6-x-x"}},[e._v("#")]),e._v(" Upgrade from 5.x.x to 6.x.x")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("Create a new empty file named "),t("code",[e._v("advanced")]),e._v(" in the rules directory.")])]),e._v(" "),t("li",[t("p",[e._v("If the directive "),t("code",[e._v("waf_priority")]),e._v(" is used, you can delete it or modify it according to the directive in the documentation.")])])]),e._v(" "),t("h3",{attrs:{id:"pre-built-modules"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pre-built-modules"}},[e._v("#")]),e._v(" Pre-built modules")]),e._v(" "),t("p",[e._v("We now provide pre-compiled modules that can be used as long as the following requirements are met.")]),e._v(" "),t("ol",[t("li",[e._v("The version of nginx must be the latest stable or mainline version.")]),e._v(" "),t("li",[e._v("The C standard library implementation must be the GNU implementation or the MUSL implementation.")])]),e._v(" "),t("blockquote",[t("p",[e._v("The download script will automatically check if the second condition is met.")])]),e._v(" "),t("p",[e._v("You can execute "),t("code",[e._v("assets/download.sh")]),e._v(" to download the corresponding version of the module and save it to the current directory. Here is the use case.")]),e._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# nginx-stable ngx_waf-stable")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sh")]),e._v(" assets/download stable stable\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# nginx-mainline ngx_waf-stable")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sh")]),e._v(" assets/download mainline stable\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# nginx-stable ngx_waf-beta")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sh")]),e._v(" assets/download stable beta\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# nginx-mainline ngx_waf-beta")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("sh")]),e._v(" assets/download mainline beta\n")])])]),t("blockquote",[t("p",[e._v("Each update takes about an hour and a half to compile the module, so it is recommended that you download the updated module more than two hours after the update, otherwise you may download the old module.")])]),e._v(" "),t("h3",{attrs:{id:"added"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#added"}},[e._v("#")]),e._v(" Added")]),e._v(" "),t("ul",[t("li",[e._v("Advanced rules are supported, see the documentation for details.")])]),e._v(" "),t("h3",{attrs:{id:"removed"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#removed"}},[e._v("#")]),e._v(" Removed")]),e._v(" "),t("ul",[t("li",[e._v("Remove mode "),t("code",[e._v("COMPAT")]),e._v(", no longer fully compatible with "),t("code",[e._v("ngx_http_rewrite_module")]),e._v(".")])]),e._v(" "),t("h3",{attrs:{id:"changed-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#changed-2"}},[e._v("#")]),e._v(" Changed")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Updated the directive "),t("code",[e._v("waf_priority")]),e._v(", see the documentation for details.")])]),e._v(" "),t("li",[t("p",[e._v("You can now use all the directives of this module in blocks "),t("code",[e._v("http")]),e._v(", "),t("code",[e._v("server")]),e._v(" and "),t("code",[e._v("location")])])])])])}),[],!1,null,null,null);t.default=s.exports}}]);