(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{365:function(e,t,a){"use strict";a.r(t);var r=a(25),i=Object(r.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"change-log-current"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#change-log-current"}},[e._v("#")]),e._v(" Change Log (Current)")]),e._v(" "),t("p",[e._v("The format is based on "),t("a",{attrs:{href:"https://keepachangelog.com/en/1.0.0/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Keep a Changelog"),t("OutboundLink")],1),e._v(",\nand this project adheres to "),t("a",{attrs:{href:"https://semver.org/spec/v2.0.0.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Semantic Versioning"),t("OutboundLink")],1),e._v(".")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("What is a breaking change?")]),e._v(" "),t("ul",[t("li",[e._v("The old configuration file may not work, for example, if a directive item is removed or renamed.")])])]),e._v(" "),t("h2",{attrs:{id:"unreleased"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#unreleased"}},[e._v("#")]),e._v(" [Unreleased]")]),e._v(" "),t("h3",{attrs:{id:"added"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#added"}},[e._v("#")]),e._v(" Added")]),e._v(" "),t("h3",{attrs:{id:"removed"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#removed"}},[e._v("#")]),e._v(" Removed")]),e._v(" "),t("h3",{attrs:{id:"changed"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#changed"}},[e._v("#")]),e._v(" Changed")]),e._v(" "),t("h3",{attrs:{id:"fixed"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fixed"}},[e._v("#")]),e._v(" Fixed")]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_10-1-2-2022-07-09-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-1-2-2022-07-09-utc-0800"}},[e._v("#")]),e._v(" [10.1.2] - 2022-07-09 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"fixed-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fixed-2"}},[e._v("#")]),e._v(" Fixed")]),e._v(" "),t("ul",[t("li",[e._v("compatible with "),t("code",[e._v("nginx-1.23.0")])])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_10-1-1-2022-01-07-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-1-1-2022-01-07-utc-0800"}},[e._v("#")]),e._v(" [10.1.1] - 2022-01-07 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"added-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#added-2"}},[e._v("#")]),e._v(" Added")]),e._v(" "),t("ul",[t("li",[e._v("PCRE2 library support.")])]),e._v(" "),t("h3",{attrs:{id:"fixed-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fixed-3"}},[e._v("#")]),e._v(" Fixed")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Memory leak.")])]),e._v(" "),t("li",[t("p",[e._v("CAPTCHA and Under-Attack-Mode sometimes cause infinite page refreshes.")])])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_10-1-0-2021-12-14-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-1-0-2021-12-14-utc-0800"}},[e._v("#")]),e._v(" [10.1.0] - 2021-12-14 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"added-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#added-3"}},[e._v("#")]),e._v(" Added")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("You can set the directive "),t("code",[e._v("waf")]),e._v(" to "),t("code",[e._v("bypass")]),e._v(", in which case no requests will be intercepted, but ngx_waf will still do the detection and logging.")])]),e._v(" "),t("li",[t("p",[e._v("The directive "),t("code",[e._v("waf_verify_bot")]),e._v(" has a new parameter "),t("code",[e._v("SogouSpider")]),e._v(", which is used to verify if it is a Sogou crawler.")])])]),e._v(" "),t("h3",{attrs:{id:"fixed-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fixed-4"}},[e._v("#")]),e._v(" Fixed")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Garbage collection is not running, which does not lead to memory leaks, but does lead to performance problems.")])]),e._v(" "),t("li",[t("p",[e._v("Sometimes the "),t("code",[e._v("[FAKE-BOT]")]),e._v(" log is printed incorrectly.")])])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_10-0-1-2021-12-05-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-0-1-2021-12-05-utc-0800"}},[e._v("#")]),e._v(" [10.0.1] - 2021-12-05 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"added-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#added-4"}},[e._v("#")]),e._v(" Added")]),e._v(" "),t("ul",[t("li",[e._v("Added two Easter eggs, which you can find clues in the documentation. These two eggs are not triggered automatically and need to be enabled manually.")])]),e._v(" "),t("h3",{attrs:{id:"fixed-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fixed-5"}},[e._v("#")]),e._v(" Fixed")]),e._v(" "),t("ul",[t("li",[e._v("All parameters of the directive "),t("code",[e._v("waf_mode")]),e._v(" corresponding to the request method are not working.")])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_10-0-0-2021-11-30-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-0-0-2021-11-30-utc-0800"}},[e._v("#")]),e._v(" [10.0.0] - 2021-11-30 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"added-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#added-5"}},[e._v("#")]),e._v(" Added")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("New directive "),t("code",[e._v("waf_zone")]),e._v(", used to declare a piece of shared memory that will be used for other directives, such as "),t("code",[e._v("waf_cc_deny")]),e._v(".")])]),e._v(" "),t("li",[t("p",[e._v("New directive "),t("code",[e._v("waf_action")]),e._v(", used to set actions after intercepting a request, such as returning a specific status code or challenging the client with a captcha.")])]),e._v(" "),t("li",[t("p",[e._v("New directive "),t("code",[e._v("waf_block_page")]),e._v(", used to set the blocking page to return the specified HTML file when the request is blocked.")])]),e._v(" "),t("li",[t("p",[e._v("A new embedded variable, "),t("code",[e._v("$waf_rate")]),e._v(", is used to indicate the number of accesses to the current IP in a period. The period is determined by the parameter "),t("code",[e._v("rate")]),e._v(" of the directive "),t("code",[e._v("waf_cc_deny")]),e._v(", or by the parameter "),t("code",[e._v("duration")]),e._v(" if the IP has been blacked out.")])]),e._v(" "),t("li",[t("p",[e._v("The directive "),t("code",[e._v("waf_captcha")]),e._v(" has a new parameter "),t("code",[e._v("max_fails")]),e._v(", which sets the maximum number of attempts for the captcha and the blocking time after it is exceeded.")])]),e._v(" "),t("li",[t("p",[e._v("The directive "),t("code",[e._v("waf_captcha")]),e._v(" has a new parameter "),t("code",[e._v("zone")]),e._v(" that specifies a piece of shared memory, which needs to be set if and only if the parameter "),t("code",[e._v("max_fails")]),e._v(" is set.")])]),e._v(" "),t("li",[t("p",[e._v("The directive "),t("code",[e._v("waf_captcha")]),e._v(" has a new parameter "),t("code",[e._v("sitekey")]),e._v(", which needs to be set if and only if the parameter "),t("code",[e._v("file")]),e._v(" is omitted.")])]),e._v(" "),t("li",[t("p",[e._v("When you reload nginx, the module keeps as much information in shared memory as possible so that it is not emptied, such as statistics used by CC protection.")])])]),e._v(" "),t("h3",{attrs:{id:"removed-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#removed-2"}},[e._v("#")]),e._v(" Removed")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("The directive "),t("code",[e._v("waf_http_status")]),e._v(" has been removed and the related features have been merged into the directive "),t("code",[e._v("waf_action")]),e._v(".")])]),e._v(" "),t("li",[t("p",[e._v("The parameter "),t("code",[e._v("size")]),e._v(" of the directive "),t("code",[e._v("waf_cc_deny")]),e._v(" has been removed and "),t("code",[e._v("zone")]),e._v(" is now used instead.")])])]),e._v(" "),t("h3",{attrs:{id:"changed-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#changed-2"}},[e._v("#")]),e._v(" Changed")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("You can omit the parameter "),t("code",[e._v("file")]),e._v(" of the directive "),t("code",[e._v("waf_under_attack")]),e._v("; omitting this parameter will use a built-in file from "),t("code",[e._v("assets/under_attack.html")]),e._v(".")])]),e._v(" "),t("li",[t("p",[e._v("You can omit the argument "),t("code",[e._v("file")]),e._v(" to the directive "),t("code",[e._v("waf_captcha")]),e._v(", which when omitted will use a built-in file based on the value of the argument "),t("code",[e._v("prov")]),e._v(", which comes from the directory "),t("code",[e._v("assets/")]),e._v(".")])])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_9-0-6-2021-10-10-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-0-6-2021-10-10-utc-0800"}},[e._v("#")]),e._v(" [9.0.6] - 2021-10-10 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"fixed-6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fixed-6"}},[e._v("#")]),e._v(" Fixed")]),e._v(" "),t("ul",[t("li",[e._v("If the directive "),t("code",[e._v("try_files")]),e._v(" is executed, CAPTCHA may fail.")])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_9-0-5-2021-10-09-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-0-5-2021-10-09-utc-0800"}},[e._v("#")]),e._v(" [9.0.5] - 2021-10-09 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"new-test-suite"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#new-test-suite"}},[e._v("#")]),e._v(" New test suite")]),e._v(" "),t("p",[e._v("By chance, I found a test suite: "),t("a",{attrs:{href:"https://github.com/openresty/test-nginx",target:"_blank",rel:"noopener noreferrer"}},[e._v("test-nginx"),t("OutboundLink")],1),e._v(".\nIt looked great, so I wrote a lot of test cases and tested with it. "),t("del",[e._v("Un")]),e._v("fortunately I found a lot of bugs, very wise of me.")]),e._v(" "),t("h3",{attrs:{id:"changed-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#changed-3"}},[e._v("#")]),e._v(" Changed")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Removed useless debug log.")])]),e._v(" "),t("li",[t("p",[e._v("More debug log.")])])]),e._v(" "),t("h3",{attrs:{id:"fixed-7"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fixed-7"}},[e._v("#")]),e._v(" Fixed")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Sometimes the connection is closed prematurely.")])]),e._v(" "),t("li",[t("p",[e._v("When CAPTCHA is enabled, the request body inspection may be wrong.")])]),e._v(" "),t("li",[t("p",[e._v("CAPTCHA may fail due to HTTP caching.")])]),e._v(" "),t("li",[t("p",[e._v("Memory leak when reloading nginx.")])]),e._v(" "),t("li",[t("p",[e._v("Failed to properly merge directive "),t("code",[e._v("waf_cache")]),e._v(" from different contexts.")])]),e._v(" "),t("li",[t("p",[e._v("Failed to properly merge directives "),t("code",[e._v("waf_cc_deny")]),e._v(" from different contexts.")])]),e._v(" "),t("li",[t("p",[e._v("Failed to inherit "),t("code",[e._v("Referer")]),e._v(" blacklist different contexts.")])]),e._v(" "),t("li",[t("p",[e._v("Failed to properly handle incorrect command syntax.")])]),e._v(" "),t("li",[t("p",[e._v("Fixed a default rule of URL.")])]),e._v(" "),t("li",[t("p",[e._v("Fixed the following files so that the page can be refreshed automatically after the CAPTCHA is completed.")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("assets/hCaptcha.html")])]),e._v(" "),t("li",[t("code",[e._v("assets/reCAPTCHAv2_Checkbox.html")])]),e._v(" "),t("li",[t("code",[e._v("assets/reCAPTCHAv2_Invisible.html")])]),e._v(" "),t("li",[t("code",[e._v("assets/reCAPTCHAv3.html")])])])])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_9-0-4-2021-09-29-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-0-4-2021-09-29-utc-0800"}},[e._v("#")]),e._v(" [9.0.4] - 2021-09-29 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"fixed-8"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fixed-8"}},[e._v("#")]),e._v(" Fixed")]),e._v(" "),t("ul",[t("li",[e._v("All inspections are incorrectly skipped when the directive "),t("code",[e._v("rewrite")]),e._v(" causes an internal redirect.")])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_9-0-3-2021-09-28-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-0-3-2021-09-28-utc-0800"}},[e._v("#")]),e._v(" [9.0.3] - 2021-09-28 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"changed-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#changed-4"}},[e._v("#")]),e._v(" Changed")]),e._v(" "),t("ul",[t("li",[e._v("More debug logs.")])]),e._v(" "),t("h3",{attrs:{id:"fixed-9"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fixed-9"}},[e._v("#")]),e._v(" Fixed")]),e._v(" "),t("ul",[t("li",[e._v("Failed to display the CAPTCHA page.")])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_9-0-2-2021-09-25-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-0-2-2021-09-25-utc-0800"}},[e._v("#")]),e._v(" [9.0.2] - 2021-09-25 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"fixed-10"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fixed-10"}},[e._v("#")]),e._v(" Fixed")]),e._v(" "),t("ul",[t("li",[e._v("Sometimes the value of the built-in variable "),t("code",[e._v("$waf_blocking_log")]),e._v(" is wrong.")])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_9-0-1-2021-09-24-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-0-1-2021-09-24-utc-0800"}},[e._v("#")]),e._v(" [9.0.1] - 2021-09-24 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"fixed-11"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fixed-11"}},[e._v("#")]),e._v(" Fixed")]),e._v(" "),t("ul",[t("li",[e._v("Failed to load rules of ModSecurity.")])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_9-0-0-2021-09-23-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-0-0-2021-09-23-utc-0800"}},[e._v("#")]),e._v(" [9.0.0] - 2021-09-23 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"note"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#note"}},[e._v("#")]),e._v(" "),t("strong",[e._v("NOTE")])]),e._v(" "),t("p",[e._v("If you would like to upgrade to this version, please see the documentation for guidelines on upgrading across versions.")]),e._v(" "),t("h3",{attrs:{id:"added-6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#added-6"}},[e._v("#")]),e._v(" Added")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Compatible with "),t("a",{attrs:{href:"https://github.com/SpiderLabs/ModSecurity",target:"_blank",rel:"noopener noreferrer"}},[e._v("ModSecurity"),t("OutboundLink")],1),e._v(".")])]),e._v(" "),t("li",[t("p",[e._v("Added two directives: "),t("code",[e._v("waf_modsecurity")]),e._v(" and "),t("code",[e._v("waf_modsecurity_transaction_id")]),e._v(".")])]),e._v(" "),t("li",[t("p",[e._v("Added parameter "),t("code",[e._v("MODSECURITY")]),e._v(" to directive "),t("code",[e._v("waf_priority")]),e._v(".")])])]),e._v(" "),t("h3",{attrs:{id:"removed-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#removed-3"}},[e._v("#")]),e._v(" Removed")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Removed some parameters for directive "),t("code",[e._v("waf_mode")]),e._v(": "),t("code",[e._v("LIBINJECTION")]),e._v(", "),t("code",[e._v("LIBINJECTION-SQLI")]),e._v(", "),t("code",[e._v("LIBINJECTION-XSS")]),e._v(" and "),t("code",[e._v("ADV")]),e._v(".")])]),e._v(" "),t("li",[t("p",[e._v("Removed the parameter "),t("code",[e._v("ADV")]),e._v(" from the directive "),t("code",[e._v("waf_priority")]),e._v(".")])]),e._v(" "),t("li",[t("p",[e._v("Removed dependency "),t("a",{attrs:{href:"https://github.com/libinjection/libinjection",target:"_blank",rel:"noopener noreferrer"}},[e._v("libinjection"),t("OutboundLink")],1),e._v(".")])])]),e._v(" "),t("h3",{attrs:{id:"fixes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fixes"}},[e._v("#")]),e._v(" Fixes")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("No longer returns a 404 status code when the captcha succeeds, but a 204 status code instead.")])]),e._v(" "),t("li",[t("p",[e._v("Sometimes a complete inspection of the request body is not performed.")])])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_8-0-3-2021-08-27-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-0-3-2021-08-27-utc-0800"}},[e._v("#")]),e._v(" [8.0.3] - 2021-08-27 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"fixed-12"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fixed-12"}},[e._v("#")]),e._v(" Fixed")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Memory leak.")])]),e._v(" "),t("li",[t("p",[e._v("A field of a structure is not initialized, so you will see a lot of "),t("code",[e._v("malloc(size) failed (12: Out of memory)")]),e._v(" in the error log.")])])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_8-0-2-2021-08-27-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-0-2-2021-08-27-utc-0800"}},[e._v("#")]),e._v(" [8.0.2] - 2021-08-27 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"fixed-13"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fixed-13"}},[e._v("#")]),e._v(" Fixed")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("nginx crashes(segmentation fault) after enabling CAPTCHA because the directive "),t("code",[e._v("waf_captcha")]),e._v(" was not properly merged with different contexts.")])]),e._v(" "),t("li",[t("p",[e._v("CAPTCHA page cannot be displayed because the directive "),t("code",[e._v("waf_captcha")]),e._v(" was not properly merged with different contexts.")])]),e._v(" "),t("li",[t("p",[e._v("If the directive "),t("code",[e._v("proxy_pass")]),e._v(" is used, neither Under-Attack-Mode nor CAPTCHA will work properly.")])])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_8-0-1-2021-08-23-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-0-1-2021-08-23-utc-0800"}},[e._v("#")]),e._v(" [8.0.1] - 2021-08-23 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"added-7"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#added-7"}},[e._v("#")]),e._v(" Added")]),e._v(" "),t("ul",[t("li",[e._v("No longer generates additional response headers when CC protection returns the status code 444.")])]),e._v(" "),t("h3",{attrs:{id:"fixed-14"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fixed-14"}},[e._v("#")]),e._v(" Fixed")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Segmentation fault when "),t("code",[e._v("User-Agent")]),e._v(" is empty.")])]),e._v(" "),t("li",[t("p",[e._v("The directive "),t("code",[e._v("waf_http_status")]),e._v(" could not be merged correctly.")])])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_8-0-0-2021-08-21-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-0-0-2021-08-21-utc-0800"}},[e._v("#")]),e._v(" [8.0.0] - 2021-08-21 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"note-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#note-2"}},[e._v("#")]),e._v(" "),t("strong",[e._v("NOTE")])]),e._v(" "),t("p",[e._v("If you would like to upgrade to this version, please see the documentation for guidelines on upgrading across versions.")]),e._v(" "),t("h3",{attrs:{id:"added-8"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#added-8"}},[e._v("#")]),e._v(" Added")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Introduced CAPTCHAs for third-party platforms, supporting hCaptcha, reCAPTCHAv2 and reCAPTCHAv3, with the associated directive "),t("code",[e._v("waf_captcha")]),e._v(".")])]),e._v(" "),t("li",[t("p",[e._v("Support recognizing friendly crawlers, including GooleBot, BingBot, BaiduSpider and YandexBot, and automatically allow them after successful recognition, the related command is "),t("code",[e._v("waf_verify_bot")]),e._v(".")])]),e._v(" "),t("li",[t("p",[e._v("CC protection supports enabling CAPTCHA mode, which enables CAPTCHA when the request rate exceeds the limit, and blocks the IP if the CAPTCHA fails three times in a row, and recounts the request rate on the contrary.")])])]),e._v(" "),t("h3",{attrs:{id:"changed-5"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#changed-5"}},[e._v("#")]),e._v(" Changed")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("The syntax of the directive "),t("code",[e._v("waf_mode")]),e._v(" has changed, see the documentation for a guide to cross-version upgrades.")])]),e._v(" "),t("li",[t("p",[e._v("The syntax of the directive "),t("code",[e._v("waf_cc_deny")]),e._v(" has changed, see the documented guide to cross-version upgrades for details.")])]),e._v(" "),t("li",[t("p",[e._v("The syntax of the directive "),t("code",[e._v("waf_cache")]),e._v(" has been changed, see the cross-version upgrade guide in the documentation.")])]),e._v(" "),t("li",[t("p",[e._v("Support for modifying the priority of request body inspection.")])])]),e._v(" "),t("h3",{attrs:{id:"removed-4"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#removed-4"}},[e._v("#")]),e._v(" Removed")]),e._v(" "),t("ul",[t("li",[e._v("Removed two parameters of the directive "),t("code",[e._v("waf_cache")]),e._v(": "),t("code",[e._v("interval")]),e._v(" and "),t("code",[e._v("percent")]),e._v(".")])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_7-1-0-2021-08-16-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-0-2021-08-16-utc-0800"}},[e._v("#")]),e._v(" [7.1.0] - 2021-08-16 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"added-9"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#added-9"}},[e._v("#")]),e._v(" Added")]),e._v(" "),t("ul",[t("li",[e._v("The parameter "),t("code",[e._v("rate")]),e._v(" of the directive "),t("code",[e._v("waf_cc_deny")]),e._v(" allows more formats, such as "),t("code",[e._v("500r/s")]),e._v(", "),t("code",[e._v("500r/60s")]),e._v(", "),t("code",[e._v("500r/m")]),e._v(", "),t("code",[e._v("500r/60m")]),e._v(", "),t("code",[e._v("500r/h")]),e._v(", "),t("code",[e._v("500r/60h")]),e._v(" and "),t("code",[e._v("500r/d")]),e._v(".")])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_7-0-1-2021-08-11-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-0-1-2021-08-11-utc-0800"}},[e._v("#")]),e._v(" [7.0.1] - 2021-08-11 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"fixed-15"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fixed-15"}},[e._v("#")]),e._v(" Fixed")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Failed to parse "),t("code",[e._v("0.0.0.0/0")]),e._v(" correctly when handling IP black and white lists.")])]),e._v(" "),t("li",[t("p",[e._v("Compatible with environments that do not support IPV6.")])])]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"_7-0-0-2021-08-04-utc-0800"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-0-0-2021-08-04-utc-0800"}},[e._v("#")]),e._v(" [7.0.0] - 2021-08-04 UTC+0800")]),e._v(" "),t("h3",{attrs:{id:"changed-6"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#changed-6"}},[e._v("#")]),e._v(" Changed")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Changed the way Under Attack Mode is implemented. It is no longer implemented using redirects, but by modifying the response body.")])]),e._v(" "),t("li",[t("p",[e._v("Removed directive "),t("code",[e._v("uri")]),e._v(" from configuration item "),t("code",[e._v("waf_under_attack")]),e._v(", see documentation for details.")])]),e._v(" "),t("li",[t("p",[e._v("Added a directive "),t("code",[e._v("file")]),e._v(" to the configuration item "),t("code",[e._v("waf_under_attack")]),e._v(" whose value should be the absolute path to an HTML file, see the documentation for details.")])]),e._v(" "),t("li",[t("p",[e._v("The directive "),t("code",[e._v("waf_cc_deny")]),e._v(" is not allowed at the context "),t("code",[e._v("http")]),e._v("。")])])])])}),[],!1,null,null,null);t.default=i.exports}}]);