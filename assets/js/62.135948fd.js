(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{390:function(t,a,e){"use strict";e.r(a);var r=e(25),_=Object(r.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"更新日志-3-x-x"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更新日志-3-x-x"}},[t._v("#")]),t._v(" 更新日志（3.x.x）")]),t._v(" "),a("p",[t._v("本文件的格式基于"),a("a",{attrs:{href:"https://keepachangelog.com/zh-CN/1.0.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何维护更新日志"),a("OutboundLink")],1),t._v("，\n并且本项目遵守"),a("a",{attrs:{href:"https://semver.org/lang/zh-CN/spec/v2.0.0.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("语义化版本"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("何为「不兼容的修改」？")]),t._v(" "),a("ul",[a("li",[t._v("原有的配置文件可能无法使用，比如删除或者重命名了某个配置项。")]),t._v(" "),a("li",[t._v("可能需要更新编译环境，比如安装新的依赖。")])])]),t._v(" "),a("h2",{attrs:{id:"_3-1-6-2021-03-07"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-6-2021-03-07"}},[t._v("#")]),t._v(" [3.1.6] - 2021-03-07")]),t._v(" "),a("h3",{attrs:{id:"修复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复"}},[t._v("#")]),t._v(" 修复")]),t._v(" "),a("ul",[a("li",[t._v("更正规则的生效顺序（"),a("a",{attrs:{href:"https://github.com/ADD-SP/ngx_waf/commit/51c7824786c060f4b0dcffe77a4a1e04b775e04b",target:"_blank",rel:"noopener noreferrer"}},[t._v("51c7824"),a("OutboundLink")],1),t._v("）。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_3-1-5-2021-03-03"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-5-2021-03-03"}},[t._v("#")]),t._v(" [3.1.5] - 2021-03-03")]),t._v(" "),a("h3",{attrs:{id:"修复-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-2"}},[t._v("#")]),t._v(" 修复")]),t._v(" "),a("ul",[a("li",[t._v("修复了 "),a("code",[t._v("config")]),t._v(" 脚本的一个错误，这个错误会导致不能正确地检查依赖项（"),a("a",{attrs:{href:"https://github.com/ADD-SP/ngx_waf/commit/075a27e4f7aaf7e78c45eac0c78c9634863be476#diff-b79606fb3afea5bd1609ed40b622142f1c98125abcfe89a76a661b0e8e343910",target:"_blank",rel:"noopener noreferrer"}},[t._v("075a27e"),a("OutboundLink")],1),t._v("）。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_3-1-4-2021-03-02"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-4-2021-03-02"}},[t._v("#")]),t._v(" [3.1.4] - 2021-03-02")]),t._v(" "),a("h3",{attrs:{id:"改动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#改动"}},[t._v("#")]),t._v(" 改动")]),t._v(" "),a("ul",[a("li",[t._v("条件允许的情况下使用更安全的字符串处理函数以避免缓冲区溢出（"),a("a",{attrs:{href:"https://github.com/ADD-SP/ngx_waf/commit/177ae68cb019f47096e6065ec34aa0ef9be07567",target:"_blank",rel:"noopener noreferrer"}},[t._v("177ae68"),a("OutboundLink")],1),t._v("）。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_3-1-3-2021-02-23"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-3-2021-02-23"}},[t._v("#")]),t._v(" [3.1.3] - 2021-02-23")]),t._v(" "),a("h3",{attrs:{id:"修复-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-3"}},[t._v("#")]),t._v(" 修复")]),t._v(" "),a("ul",[a("li",[t._v("改正规则的生效顺序（"),a("a",{attrs:{href:"https://github.com/ADD-SP/ngx_waf/commit/857ec84c6519d88d1c1a5560a244dceffd413f3f",target:"_blank",rel:"noopener noreferrer"}},[t._v("857ec84"),a("OutboundLink")],1),t._v("）。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_3-1-2-2021-02-17"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-2-2021-02-17"}},[t._v("#")]),t._v(" [3.1.2] - 2021-02-17")]),t._v(" "),a("h3",{attrs:{id:"修复-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-4"}},[t._v("#")]),t._v(" 修复")]),t._v(" "),a("ul",[a("li",[t._v("修复了一个 bug，这个 bug 会导致当规则文件不具有可写权限时初始化失败（"),a("a",{attrs:{href:"https://github.com/ADD-SP/ngx_waf/commit/20acd27815d1f266d89c1557e93848c96117b8ff",target:"_blank",rel:"noopener noreferrer"}},[t._v("20acd27"),a("OutboundLink")],1),t._v("）。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_3-1-1-2021-01-18"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-1-2021-01-18"}},[t._v("#")]),t._v(" [3.1.1] - 2021-01-18")]),t._v(" "),a("h3",{attrs:{id:"修复-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-5"}},[t._v("#")]),t._v(" 修复")]),t._v(" "),a("ul",[a("li",[t._v("兼容较低版本的 GCC（"),a("a",{attrs:{href:"https://github.com/ADD-SP/ngx_waf/commit/becbbe022b9f6efa606e720d7cbcd6c5d6f22c33",target:"_blank",rel:"noopener noreferrer"}},[t._v("becbbe0"),a("OutboundLink")],1),t._v("）。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_3-1-0-2021-01-17"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-0-2021-01-17"}},[t._v("#")]),t._v(" [3.1.0] - 2021-01-17")]),t._v(" "),a("h3",{attrs:{id:"注意"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意"}},[t._v("#")]),t._v(" 注意")]),t._v(" "),a("ul",[a("li",[t._v("因为在 "),a("code",[t._v("v3.0.3")]),t._v(" 测试过程中新增了向下兼容的功能，所以 "),a("code",[t._v("v3.0.3")]),t._v(" 被跳过。")])]),t._v(" "),a("h3",{attrs:{id:"新增"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增"}},[t._v("#")]),t._v(" 新增")]),t._v(" "),a("ul",[a("li",[t._v("增加调试日志便于排障（"),a("a",{attrs:{href:"https://github.com/ADD-SP/ngx_waf/commit/bac1d026e9e902d9a49881e899cba4965f3388a4",target:"_blank",rel:"noopener noreferrer"}},[t._v("bac1d02"),a("OutboundLink")],1),t._v("）。")])]),t._v(" "),a("h3",{attrs:{id:"修复-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-6"}},[t._v("#")]),t._v(" 修复")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("修复了一个段错误（"),a("a",{attrs:{href:"https://github.com/ADD-SP/ngx_waf/commit/57d7719654caddc40ee655c797f0984f42c25495",target:"_blank",rel:"noopener noreferrer"}},[t._v("57d7719"),a("OutboundLink")],1),t._v("）。")])]),t._v(" "),a("li",[a("p",[t._v("更精确的访问频次统计（"),a("a",{attrs:{href:"https://github.com/ADD-SP/ngx_waf/commit/53d3b149a524252dbb9b8170e31f4b1f4895a6b7",target:"_blank",rel:"noopener noreferrer"}},[t._v("53d3b14"),a("OutboundLink")],1),t._v("）。")])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_3-0-2-2021-01-10"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-0-2-2021-01-10"}},[t._v("#")]),t._v(" [3.0.2] - 2021-01-10")]),t._v(" "),a("h3",{attrs:{id:"注意-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意-2"}},[t._v("#")]),t._v(" 注意")]),t._v(" "),a("ul",[a("li",[t._v("因为在 "),a("code",[t._v("v3.0.1")]),t._v("上有热修复，所以 "),a("code",[t._v("v3.0.2")]),t._v(" 的一切测试版本作废，请不要使用这些测试版。")])]),t._v(" "),a("h3",{attrs:{id:"修复-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-7"}},[t._v("#")]),t._v(" 修复")]),t._v(" "),a("ul",[a("li",[t._v("修复一个了在 "),a("code",[t._v("Alpine Linux")]),t._v(" 下的编译错误（"),a("a",{attrs:{href:"https://github.com/ADD-SP/ngx_waf/commit/e989aa34370da73f03627601188ca33844372c4f",target:"_blank",rel:"noopener noreferrer"}},[t._v("e989aa3"),a("OutboundLink")],1),t._v("）。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_3-0-1-2020-12-28"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-0-1-2020-12-28"}},[t._v("#")]),t._v(" [3.0.1] - 2020-12-28")]),t._v(" "),a("h3",{attrs:{id:"修复-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-8"}},[t._v("#")]),t._v(" 修复")]),t._v(" "),a("ul",[a("li",[t._v("修复了一个在检查 Cookie 时的段错误（"),a("a",{attrs:{href:"https://github.com/ADD-SP/ngx_waf/commit/8dc2b56e9a8ae7c22cc5309ac0a060b0358f545b",target:"_blank",rel:"noopener noreferrer"}},[t._v("8dc2b56"),a("OutboundLink")],1),t._v("）。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_3-0-0-2020-12-25"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-0-0-2020-12-25"}},[t._v("#")]),t._v(" [3.0.0] - 2020-12-25")]),t._v(" "),a("h3",{attrs:{id:"新增-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增-2"}},[t._v("#")]),t._v(" 新增")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("CC 防御现在也支持了 IPV6（"),a("a",{attrs:{href:"https://github.com/ADD-SP/ngx_waf/commit/00fbc1c20ec964f6cd3bb992d756737e95b6c7ed",target:"_blank",rel:"noopener noreferrer"}},[t._v("00fbc1c"),a("OutboundLink")],1),t._v("）。")])]),t._v(" "),a("li",[a("p",[t._v("IP 黑白名单支持了 IPV6。可以识别形如 "),a("code",[t._v("fe80::/10")]),t._v(" 的 IPV6 字符串（"),a("a",{attrs:{href:"https://github.com/ADD-SP/ngx_waf/commit/8519b26f5fb9491ac60ae084247a0957c0931d0c",target:"_blank",rel:"noopener noreferrer"}},[t._v("8519b26"),a("OutboundLink")],1),t._v("）。")])])]),t._v(" "),a("h3",{attrs:{id:"改动-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#改动-2"}},[t._v("#")]),t._v(" 改动")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("删除了一些无用的日志（"),a("a",{attrs:{href:"https://github.com/ADD-SP/ngx_waf/commit/bd279e7be872621fa75337722a9fae30b2ea6812",target:"_blank",rel:"noopener noreferrer"}},[t._v("bd279e7"),a("OutboundLink")],1),t._v("）。")])]),t._v(" "),a("li",[a("p",[t._v("友好的错误提示（"),a("a",{attrs:{href:"https://github.com/ADD-SP/ngx_waf/commit/d1185b26a413e45dcf5ef479b0078aa57a4b5962",target:"_blank",rel:"noopener noreferrer"}},[t._v("d1185b2"),a("OutboundLink")],1),t._v(" & "),a("a",{attrs:{href:"https://github.com/ADD-SP/ngx_waf/commit/f2b617d5174eb1bc6982113415ddcb1f798ef703",target:"_blank",rel:"noopener noreferrer"}},[t._v("f2b617d"),a("OutboundLink")],1),t._v("）。当规则文件中 IP 地址无效或者 IP 地址块重叠的时候警告或者报错（并不能检测所有的重叠情况）。")])]),t._v(" "),a("li",[a("p",[t._v("更快的 IP 地址检查速度（"),a("a",{attrs:{href:"https://github.com/ADD-SP/ngx_waf/commit/2b9e77404826666df301c3d6b3ce07a6968de266",target:"_blank",rel:"noopener noreferrer"}},[t._v("2b9e774"),a("OutboundLink")],1),t._v("）。改用前缀树检查 IP，现在在常数时间内即可完成 IP 的匹配，之前是一个一个地匹配，是线性时间。")])])]),t._v(" "),a("h3",{attrs:{id:"修复-9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-9"}},[t._v("#")]),t._v(" 修复")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("修复了 Cookie 检查的失效的 bug（"),a("a",{attrs:{href:"https://github.com/ADD-SP/ngx_waf/commit/87beed183e404c70411a2d35ea68ebbccccf5ff6",target:"_blank",rel:"noopener noreferrer"}},[t._v("87beed1"),a("OutboundLink")],1),t._v("）。")])]),t._v(" "),a("li",[a("p",[t._v("修改 "),a("code",[t._v("config")]),t._v(" 文件以确保执行 "),a("code",[t._v("make")]),t._v(" 或 "),a("code",[t._v("make modules")]),t._v(" 时最新的模块代码能够被编译（"),a("a",{attrs:{href:"https://github.com/ADD-SP/ngx_waf/commit/25f97f5e7f3792b131ab0ebb1bfe4b7fe5e330ae",target:"_blank",rel:"noopener noreferrer"}},[t._v("25f97f5"),a("OutboundLink")],1),t._v("）。在修复之前，如果仅仅 "),a("code",[t._v("inc/")]),t._v(" 下的文件发生变化，编译时不会将最新的代码编译进去，因为没有检查 "),a("code",[t._v("inc/")]),t._v(" 下的文件是否发生变化。")])]),t._v(" "),a("li",[a("p",[t._v("修复了 IPV4 网段识别错误的 bug（"),a("a",{attrs:{href:"https://github.com/ADD-SP/ngx_waf/commit/73a22eb3538a24e9714bf8331946a5654df20cc1",target:"_blank",rel:"noopener noreferrer"}},[t._v("73a22eb"),a("OutboundLink")],1),t._v("）。这个 bug 可能会导致当规则中出现类似 "),a("code",[t._v("192.168.0.0/10")]),t._v("，即后缀不是 8 的倍数的时候无法正确生成子网掩码。")])])])])}),[],!1,null,null,null);a.default=_.exports}}]);