(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{392:function(t,a,_){"use strict";_.r(a);var r=_(25),v=Object(r.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"更新日志-5-x-x"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更新日志-5-x-x"}},[t._v("#")]),t._v(" 更新日志（5.x.x）")]),t._v(" "),a("p",[t._v("本文件的格式基于"),a("a",{attrs:{href:"https://keepachangelog.com/zh-CN/1.0.0",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何维护更新日志"),a("OutboundLink")],1),t._v("，\n并且本项目遵守"),a("a",{attrs:{href:"https://semver.org/lang/zh-CN/spec/v2.0.0.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("语义化版本"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("何为「不兼容的修改」？")]),t._v(" "),a("ul",[a("li",[t._v("原有的配置文件可能无法使用，比如删除或者重命名了某个配置项。")]),t._v(" "),a("li",[t._v("可能需要更新编译环境，比如安装新的依赖。")])])]),t._v(" "),a("h2",{attrs:{id:"_5-5-1-2021-07-16-utc-0800"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-1-2021-07-16-utc-0800"}},[t._v("#")]),t._v(" [5.5.1] - 2021-07-16 UTC+0800")]),t._v(" "),a("h3",{attrs:{id:"修复"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复"}},[t._v("#")]),t._v(" 修复")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("段错误。")])]),t._v(" "),a("li",[a("p",[t._v("内存泄漏。")])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_5-5-0-2021-06-25-utc-0800"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-0-2021-06-25-utc-0800"}},[t._v("#")]),t._v(" [5.5.0] - 2021-06-25 UTC+0800")]),t._v(" "),a("h3",{attrs:{id:"变动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变动"}},[t._v("#")]),t._v(" 变动")]),t._v(" "),a("ul",[a("li",[t._v("在工作模式 "),a("code",[t._v("STD")]),t._v(" 和 "),a("code",[t._v("DYNAMIC")]),t._v(" 中禁用了基于 "),a("code",[t._v("libinjection")]),t._v(" 的 XSS 攻击检测，因为有用户反映误报比较高。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_5-4-2-2021-06-15-utc-0800"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-2-2021-06-15-utc-0800"}},[t._v("#")]),t._v(" [5.4.2] - 2021-06-15 UTC+0800")]),t._v(" "),a("h3",{attrs:{id:"修复-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-2"}},[t._v("#")]),t._v(" 修复")]),t._v(" "),a("ul",[a("li",[t._v("如果启用了 POST 检测，则访问日志（access_log）中不会记录 POST 请求，即丢失所有的 POST 请求的日志。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_5-4-1-2021-06-09-utc-0800"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-1-2021-06-09-utc-0800"}},[t._v("#")]),t._v(" [5.4.1] - 2021-06-09 UTC+0800")]),t._v(" "),a("h3",{attrs:{id:"修复-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-3"}},[t._v("#")]),t._v(" 修复")]),t._v(" "),a("ul",[a("li",[t._v("当使用了 "),a("code",[t._v("error_page")]),t._v(" 配置时，内置变量的值可能会出错。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_5-4-0-2021-06-03-utc-0800"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-0-2021-06-03-utc-0800"}},[t._v("#")]),t._v(" [5.4.0] - 2021-06-03 UTC+0800")]),t._v(" "),a("h3",{attrs:{id:"注意"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意"}},[t._v("#")]),t._v(" "),a("strong",[t._v("注意")])]),t._v(" "),a("p",[a("strong",[t._v("本次更新更换了 libinjection 的 clone 链接，新的链接为 "),a("a",{attrs:{href:"https://github.com/libinjection/libinjection.git",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/libinjection/libinjection.git"),a("OutboundLink")],1),t._v("。")])]),t._v(" "),a("h3",{attrs:{id:"新增"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增"}},[t._v("#")]),t._v(" 新增")]),t._v(" "),a("ul",[a("li",[t._v("XSS 攻击防御（Powered By "),a("a",{attrs:{href:"https://github.com/libinjection/libinjection",target:"_blank",rel:"noopener noreferrer"}},[t._v("libinjection"),a("OutboundLink")],1),t._v("）。")])]),t._v(" "),a("h3",{attrs:{id:"变动-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变动-2"}},[t._v("#")]),t._v(" 变动")]),t._v(" "),a("ul",[a("li",[t._v("增加内置变量计算相关的调试日志。")])]),t._v(" "),a("h3",{attrs:{id:"修复-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-4"}},[t._v("#")]),t._v(" 修复")]),t._v(" "),a("ul",[a("li",[t._v("POST 检测失效。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_5-3-2-2021-05-28-utc-0800"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-2-2021-05-28-utc-0800"}},[t._v("#")]),t._v(" [5.3.2] - 2021-05-28 UTC+0800")]),t._v(" "),a("h3",{attrs:{id:"修复-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-5"}},[t._v("#")]),t._v(" 修复")]),t._v(" "),a("ul",[a("li",[t._v("内存损坏。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_5-3-1-2021-05-26-gmt-0800"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-1-2021-05-26-gmt-0800"}},[t._v("#")]),t._v(" [5.3.1] - 2021-05-26 GMT+0800")]),t._v(" "),a("h3",{attrs:{id:"修复-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-6"}},[t._v("#")]),t._v(" 修复")]),t._v(" "),a("ul",[a("li",[t._v("有时即使正确安装了依赖也不能编译模块。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_5-3-0-2021-05-16-gmt-0800"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-0-2021-05-16-gmt-0800"}},[t._v("#")]),t._v(" [5.3.0] - 2021-05-16 GMT+0800")]),t._v(" "),a("h3",{attrs:{id:"新增-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增-2"}},[t._v("#")]),t._v(" 新增")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("新的配置："),a("code",[t._v("waf_under_attack")]),t._v("，当网站受到攻击时可以使用。")])]),t._v(" "),a("li",[a("p",[t._v("新的配置："),a("code",[t._v("waf_http_status")]),t._v("，用于设置请求被拦截后返回的 HTTP 状态码。")])]),t._v(" "),a("li",[a("p",[t._v("新的内置变量："),a("code",[t._v("$waf_blocking_log")]),t._v("，当请求被拦截其值时不为空字符串。")])])]),t._v(" "),a("h3",{attrs:{id:"变动-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变动-3"}},[t._v("#")]),t._v(" 变动")]),t._v(" "),a("ul",[a("li",[t._v("更新了默认规则。")])]),t._v(" "),a("h3",{attrs:{id:"修复-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-7"}},[t._v("#")]),t._v(" 修复")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("CC 防护有时会失效。")])]),t._v(" "),a("li",[a("p",[t._v("Cookie 防护有时会失效。")])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_5-1-2-2021-04-30-gmt-0800"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-2-2021-04-30-gmt-0800"}},[t._v("#")]),t._v(" [5.1.2] - 2021-04-30 GMT+0800")]),t._v(" "),a("h3",{attrs:{id:"新增-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增-3"}},[t._v("#")]),t._v(" 新增")]),t._v(" "),a("ul",[a("li",[t._v("支持检测 SQL 注入（Powered By "),a("a",{attrs:{href:"https://github.com/libinjection/libinjection",target:"_blank",rel:"noopener noreferrer"}},[t._v("libinjection"),a("OutboundLink")],1),t._v("）。你可以通过启用 "),a("code",[t._v("LIB-INJECTION")]),t._v(" 模式开启该功能，详见使用文档。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_5-1-1-2021-04-23-gmt-0800"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-1-2021-04-23-gmt-0800"}},[t._v("#")]),t._v(" [5.1.1] - 2021-04-23 GMT+0800")]),t._v(" "),a("h3",{attrs:{id:"修复-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-8"}},[t._v("#")]),t._v(" 修复")]),t._v(" "),a("ul",[a("li",[t._v("URL 和 Referer 白名单规则失效。")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_5-1-0-2021-04-20-gmt-0800"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-0-2021-04-20-gmt-0800"}},[t._v("#")]),t._v(" [5.1.0] - 2021-04-20 GMT+0800")]),t._v(" "),a("h3",{attrs:{id:"新增-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增-4"}},[t._v("#")]),t._v(" 新增")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("新的内置变量 "),a("code",[t._v("waf_log")]),t._v("，当本模块进行了检查时不为空字符串，反之则为空字符串，主要用于 "),a("code",[t._v("access_log")]),t._v(" 指令。")])]),t._v(" "),a("li",[a("p",[t._v("新的内置变量 "),a("code",[t._v("waf_spend")]),t._v("，记录本模块执行检查花费的时间（毫秒）。")])])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"_5-0-0-2021-04-07-gmt-0800"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-0-0-2021-04-07-gmt-0800"}},[t._v("#")]),t._v(" [5.0.0] - 2021-04-07 GMT+0800")]),t._v(" "),a("h3",{attrs:{id:"警告"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#警告"}},[t._v("#")]),t._v(" "),a("strong",[t._v("警告")])]),t._v(" "),a("p",[a("strong",[t._v("此版本包含不兼容的更新（breaking changes）。")])]),t._v(" "),a("h3",{attrs:{id:"新增-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增-5"}},[t._v("#")]),t._v(" 新增")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("新增了模式 "),a("code",[t._v("CACHE")]),t._v("，启用此模式后会缓存每次检查的结果，提高性能。")])]),t._v(" "),a("li",[a("p",[t._v("新增了配置 "),a("code",[t._v("waf_cache")]),t._v(" 用于设置缓存相关的参数。")])]),t._v(" "),a("li",[a("p",[t._v("新增了配置 "),a("code",[t._v("waf_cc_deny")]),t._v("，用于设置 CC 防护相关的参数。")])]),t._v(" "),a("li",[a("p",[t._v("新增了配置 "),a("code",[t._v("waf_priority")]),t._v("，用来设置除了 POST 检查以外所有的检查项目的优先级。")])]),t._v(" "),a("li",[a("p",[t._v("当 CC 防护返回 503 状态码时会附上 "),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Retry-After",target:"_blank",rel:"noopener noreferrer"}},[t._v("Retry-After"),a("OutboundLink")],1),t._v(" 响应头。")])])]),t._v(" "),a("h3",{attrs:{id:"移除"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#移除"}},[t._v("#")]),t._v(" 移除")]),t._v(" "),a("ul",[a("li",[t._v("废弃了配置 "),a("code",[t._v("waf_cc_deny_limit")]),t._v("，使用新的配置 "),a("code",[t._v("waf_cc_deny")]),t._v(" 替代。")])]),t._v(" "),a("h3",{attrs:{id:"变动-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变动-4"}},[t._v("#")]),t._v(" 变动")]),t._v(" "),a("ul",[a("li",[t._v("互换了 CC 防护和 IP 白名单检查的默认优先级。")])]),t._v(" "),a("h3",{attrs:{id:"修复-9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复-9"}},[t._v("#")]),t._v(" 修复")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("修复了当 worker 进程数量大于一时的段错误。")])]),t._v(" "),a("li",[a("p",[t._v("修复了 CC 防护统计有时不准的错误。")])])])])}),[],!1,null,null,null);a.default=v.exports}}]);